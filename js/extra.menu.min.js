!function(e){"use strict";var t=window.$window||e(window),n=window.extra||{};e.fn.extraSlider=function(a){var i=e.extend({auto:!1,draggable:!1,dragWindow:!1,dragWindowObject:t,ease:Quad.easeOut,forcedDimensions:!0,keyboard:!1,margin:0,minDrag:50,navigate:!0,navigation:null,paginate:!0,pagination:null,paginateContent:"",resizable:!0,speed:.5,type:"slide",onGotoNext:null,onGotoPrev:null,onInit:null,onMoveEnd:null,onMoveStart:null,onPause:null,onResume:null,onUpdate:null,onUpdateClones:null},a);return this.each(function(){function a(){z>T?z=0:0>z&&(z=T);var e=-(P*z+b*D);TweenMax.set(m,{x:e,force3D:"auto"})}function o(t){var n,a,i=0;return C.not(".cloned").each(function(){n=e(this),a="height"===t?n.outerHeight(!0):n.outerWidth(!0),a>i&&(i=a)}),i}function s(e,t){"slide"===i.type?(a(),i.draggable&&"slide"===i.type&&void 0!==p&&Draggable.get(m).enable()):"fade"===i.type&&t.length&&TweenMax.set(t.hide(),{autoAlpha:0}),C.eq(z+b).addClass("active"),!isNaN(i.auto)&&i.auto>0&&u(),i.onMoveEnd&&e>0&&i.onMoveEnd(C.eq(z+b),T+1,x),x.trigger("moveEnd.extra.menu",[C.eq(z+b),T+1,x])}function r(t,n){if(t!==z){n=void 0!==n?n:i.speed;var a,o;if(C.removeClass("active"),!TweenMax.isTweening(m)&&!TweenMax.isTweening(C))switch(N=z,z=parseInt(t,10),("fade"===i.type||"custom"===i.type)&&(z>T?z=0:0>z&&(z=T)),a=z,a>T?a=0:0>a&&(a=T),i.onMoveStart&&n>0&&i.onMoveStart(C.eq(a+b),T+1,x),x.trigger("moveStart.extra.menu",[C.eq(a+b),T+1,x]),i.paginate&&y.each(function(){e(this).find("a").removeClass("active").eq(a).addClass("active")}),i.type){case"slide":o=-(P*z+b*D),0!==I&&(z>T&&(o+=D*I),0>z&&(o-=D*I)),TweenMax.to(m,n,{x:o,force3D:"auto",onComplete:s,onCompleteParams:[n],ease:i.ease});break;case"fade":C.eq(N).css("zIndex",1),TweenMax.to(C.eq(z).show().css("zIndex",2),n,{css:{autoAlpha:1},onComplete:s,onCompleteParams:[n,C.eq(N)]})}}}function d(){var e;return i.forcedDimensions&&(m.css("width",""),C.css("width","").css("height",""),w.css("width","").css("height","")),D=o("width"),q=o("height"),P=D*k,e=Math.max(1,Math.floor(w.width()/D)),e!==k?(k=e,T=Math.floor((C.not(".cloned").length-1)/k),I=Math.abs((T+1)*k-C.not(".cloned").length),"slide"===i.type&&l(),d(),!1):(i.forcedDimensions&&(C.css({width:D+"px",height:q+"px"}),w.css({width:P+"px",height:q+"px"})),"slide"===i.type&&(a(),m.width(99999)),C.removeClass("active"),C.eq(z+b).addClass("active"),i.onUpdate&&i.onUpdate(C.eq(z+b),T+1,x),void x.trigger("update.extra.menu",[C.eq(z+b),T+1,x]))}function l(){C.find(".cloned").remove(),C.first().before(C.slice(-(k+i.margin+I)).clone(!0).addClass("cloned")),C.last().after(C.slice(0,k+i.margin+I).clone(!0).addClass("cloned")),C=m.find("> li"),b=C.filter(".cloned").size()/2||0,i.onUpdateClones&&i.onUpdateClones(C.eq(z+b),T+1,x),x.trigger("updateClones.extra.menu",[C.eq(z+b),T+1,x])}function c(e){x.trigger("gotoNext.extra.menu",[x]),i.onGotoNext&&i.onGotoNext(x),e=void 0!==e?e:i.speed,r(z+1,e)}function g(e){x.trigger("gotoPrev.extra.menu",[x]),i.onGotoPrev&&i.onGotoPrev(x),e=void 0!==e?e:i.speed,r(z-1,e)}function u(){f&&f.kill(),f=TweenMax.delayedCall(i.auto,function(){c(),u()})}var h,f,p,v,x=e(this),w=e("> .wrapper",this),m=w.find("> ul"),C=m.find("> li"),b=0,M=i.navigation||x.find(".navigation"),y=i.pagination||x.find(".pagination"),D=0,q=0,T=C.length-1,k=-1,P=D,z=0,N=T,I=0,A=0,E=0,G=0,S=0;switch(C.each(function(t){e(this).data("index",t)}),D=o("width"),q=o("height"),i.type){case"slide":x.addClass("extra-slider-slide");break;case"fade":x.addClass("extra-slider-fade"),C.each(function(t){t===z?TweenMax.set(e(this),{css:{autoAlpha:1,zIndex:2}}):TweenMax.set(e(this),{css:{autoAlpha:0,zIndex:1}})})}if(e(this).on("update",function(){d()}),e(this).on("next",function(e,t){c(t)}),e(this).on("prev",function(e,t){g(t)}),e(this).on("goto",function(e,t,n){n=void 0!==n?n:i.speed,r(t,n)}),i.resizable&&(h=void 0!==n.resizeEvent?n.resizeEvent:"resize",t.on(h,function(){d()})),i.navigate&&(M.length||(M=e('<div class="navigation"><a href="#" class="prev">Previous</a><a href="#" class="next">Next</a></div>').insertAfter(w)),e("a.prev",M).click(function(){return g(),!1}),e("a.next",M).click(function(){return c(),!1})),i.paginate){if(y.length||(y=e('<div class="pagination"></div>').insertAfter(w)),""!==i.paginateContent&&i.paginateContent.length>0)for(y.empty(),A=0;T>=A;A+=1)e("<a>",{href:"#"}).html(""!==i.paginateContent?i.paginateContent.replace("%d",A+1):A+1).appendTo(y);y.each(function(){e(this).find("a").removeClass("active").eq(z).addClass("active"),e("a",e(this)).each(function(t){e(this).click(function(){return e(this).hasClass("active")||e(this).hasClass("disabled")||r(t),!1})})})}i.keyboard&&t.on("keydown",function(e){39===e.which&&c(),37===e.which&&g()}),!isNaN(i.auto)&&i.auto>0&&(u(),x.on("mouseenter pause",function(){i.onPause&&i.onPause(x),x.trigger("pause.extra.menu",[x]),f.pause()}).on("mouseleave resume",function(){i.onResume&&i.onResume(x),x.trigger("resume.extra.menu",[x]),f.resume()})),i.draggable&&"slide"===i.type&&(x.addClass("extra-slider-draggable"),void 0!==Draggable?(Draggable.create(m,{force3D:"auto",dragClickables:!0,type:"x",cursor:"move",lockAxis:"x,y",throwProps:!1,onDrag:function(){return 0!==this.y&&Math.abs(E-this.x)<i.minDrag&&i.dragWindow?(TweenMax.set(i.dragWindowObject,{scrollTo:{autoKill:!1,y:S+(G-this.pointerY)}}),!1):void 0},onDragStart:function(){x.trigger("pause").addClass("extra-slider-mouse-down"),E=this.x,G=this.pointerY,S=i.dragWindowObject.scrollTop()},onDragEnd:function(){x.trigger("resume").removeClass("extra-slider-mouse-down"),Math.abs(E-this.x)>i.minDrag?(Draggable.get(m).disable(),v=E-this.x>0?-1:1,1===v?g():c()):d()}}),p=Draggable.get(m)):console.log("Draggable is not detected. You need to load it to enable drag. More info here : http://www.greensock.com/draggable/")),d(),t.load(function(){d()}),i.onInit&&i.onInit(C.eq(z+b),T+1,x),x.addClass("extra-slider-processed").trigger("init.extra.menu",[C.eq(z+b),T+1,x]),r(0)}),this}}(jQuery);